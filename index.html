<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inversiones YegniMaik - Control de Inventario</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container my-4">
        <header class="text-center mb-4">
            <h1>Inversiones YegniMaik</h1>
            <p>Control de Inventario en Tiempo Real</p>
        </header>

        <div class="mb-4">
            <h2>Inventario</h2>
            <table class="table table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Stock Inicial</th>
                        <th>Entradas</th>
                        <th>Salidas</th>
                        <th>Stock Actual</th>
                    </tr>
                </thead>
                <tbody id="inventory-table">
                    <!-- Filas generadas dinámicamente -->
                </tbody>
            </table>
        </div>

        <div class="mb-4">
            <h2>Registrar Movimiento</h2>
            <form id="movement-form">
                <div class="mb-3">
                    <label for="product" class="form-label">Producto</label>
                    <select id="product" class="form-select" required>
                        <!-- Opciones generadas dinámicamente -->
                    </select>
                </div>
                <div class="mb-3">
                    <label for="type" class="form-label">Tipo de Movimiento</label>
                    <select id="type" class="form-select" required>
                        <option value="entrada">Entrada</option>
                        <option value="salida">Salida</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="quantity" class="form-label">Cantidad</label>
                    <input type="number" id="quantity" class="form-control" min="1" required>
                </div>
                <button type="submit" class="btn btn-primary">Registrar</button>
            </form>
        </div>

        <canvas id="stockChart" width="400" height="200"></canvas>
    </div>

    <script>
        const products = {
            'Aceite Corcovado 900 ml': 100,
            'Aceite Corcordia Medio Litro': 100,
            'Aceite Corcordia Cuarto Litro': 100,
            'Aceite Corcordia 110 ml': 100,
            'Harina Pan Tradicional': 100,
            'Harina Pan Arroz': 100,
            'Budare Harina': 100,
            'Harina Belén': 100,
            'Harina de Trigo Doña Maria': 100,
            'Harina de Dulce Mar': 100,
            'Atún Diplomático': 100,
            'Leche la Pastora': 100,
            'Estancia': 100,
            'Nelly 500g': 100,
            'Nelly 250g': 100,
            'Pasta Especial Corta 1kg': 100,
            'Pasta Especial Larga': 100,
            'Pasta Medio Kilo': 100,
            'Teta de Cafe Madrid 50g': 100,
            'Arroz Llano Verde': 100,
            'Arroz Mary 1kg': 100,
            'Cafe Madrid 250g': 100,
            'Cafe Madrid 100g': 100,
            'Cafe Amanecer 200g': 100,
            'Teta de Cafe Amanecer 100g': 100,
            'Cafe Amanecer 50g': 100,
            'Azucar Konfin y Pastora': 100,
            'Azucar Medio': 100,
            'Teta de Azúcar': 100,
            'Sopa Maggi': 100,
            'Leche Purelac': 100,
            'Leche Purelac 200g': 100,
            'Leche Purelac 100g': 100,
            'Salsa Heinz 195mg': 100,
            'Leche Dobom 200g': 100,
            'Leche Dobon 100g': 100,
            'Sardina Mar Bonita': 100,
            'Diablito': 100,
            'Mayonesa Mavesa 175g': 100,
            'Vainilla': 100,
            'Maizena': 100,
            'Condimentos': 100,
            'Vinagre': 100,
            'Mayonesa 475g': 100,
            'Mayonesa El Rey': 100,
            'Salsa para Pasta': 100,
            'Tres Combos de Salsas': 100,
            'Salsa de Tomate Heinz 57': 100,
            'Aceite Coamo': 100,
            'Atún Gran Bodega': 100,
            'Cubito': 100,
            'Azúcar Doce Día': 100,
            'Papelon': 100,
            'Leche Condensada Cremor': 100,
            'Azúcar Don Genaro': 100,
            'Aceite Vatel': 100,
            'Margarina Mirasol': 100,
            'Sal Las Marías': 100,
            'Salsa de Tomate Grande Heinz': 100,
            'Salsa de Tomate Grande Pampero': 100,
            'Azúcar La Pastora 1kg': 100,
            'Arroz Mary Superior': 100
        };

        function updateInventoryTable() {
            const tableBody = document.getElementById('inventory-table');
            tableBody.innerHTML = '';

            for (const [product, stock] of Object.entries(products)) {
                const row = document.createElement('tr');

                row.innerHTML = `
                    <td>${product}</td>
                    <td>100</td>
                    <td id="entry-${product}">0</td>
                    <td id="exit-${product}">0</td>
                    <td id="stock-${product}">${stock}</td>
                `;

                tableBody.appendChild(row);
            }
        }

        function populateProductOptions() {
            const productSelect = document.getElementById('product');
            productSelect.innerHTML = '';

            for (const product of Object.keys(products)) {
                const option = document.createElement('option');
                option.value = product;
                option.textContent = product;
                productSelect.appendChild(option);
            }
        }

        function handleFormSubmit(event) {
            event.preventDefault();

            const product = document.getElementById('product').value;
            const type = document.getElementById('type').value;
            const quantity = parseInt(document.getElementById('quantity').value);

            if (type === 'entrada') {
                products[product] += quantity;
                document.getElementById(`entry-${product}`).textContent = parseInt(document.getElementById(`entry-${product}`).textContent) + quantity;
            } else if (type === 'salida') {
                products[product] -= quantity;
                document.getElementById(`exit-${product}`).textContent = parseInt(document.getElementById(`exit-${product}`).textContent) + quantity;
            }

            document.getElementById(`stock-${product}`).textContent = products[product];
            updateStockChart();
        }

        function updateStockChart() {
            const labels = Object.keys(products);
            const data = Object.values(products);

            stockChart.data.labels = labels;
            stockChart.data.datasets[0].data = data;
            stockChart.update();
        }

        const ctx = document.getElementById('stockChart').getContext('2d');
        const stockChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: Object.keys(products),
                datasets: [{
                    label: 'Stock Actual',
                    data: Object.values(products),
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        document.getElementById('movement-form').addEventListener('submit', handleFormSubmit);
        populateProductOptions();
        updateInventoryTable();
    </script>
</body>
</html>
